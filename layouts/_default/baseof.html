{{- if lt hugo.Version "0.146.0" }}
{{- errorf "=> hugo v0.146.0 or greater is required for hugo-PaperMod to build " }}
{{- end -}}

<!DOCTYPE html>
{{- $theme := site.Params.defaultTheme | default "auto" }}
{{- if eq $theme "dark" }}
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}" data-theme="dark">
{{- else if eq $theme "light" }}
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}" data-theme="light">
{{- else }}
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}" data-theme="auto">
{{- end }}

<head>
    {{- partial "head.html" . }}
    {{- if site.Params.sidebarProfile }}
    <style>
        .main-wrapper {
            display: flex;
            max-width: 1200px;
            margin: 0 auto;
            gap: var(--gap, 24px);
            padding: 0 var(--gap, 24px);
        }
        
        .sidebar-profile {
            flex: 0 0 250px;
            position: sticky;
            top: calc(var(--header-height, 60px) + var(--gap, 24px));
            height: fit-content;
            margin-top: var(--gap, 24px);
        }
        
        .sidebar-profile-inner {
            background: var(--entry, rgb(255, 255, 255));
            border-radius: var(--radius, 8px);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        [data-theme="dark"] .sidebar-profile-inner {
            background: var(--entry, rgb(46, 46, 51));
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .sidebar-avatar {
            border-radius: 50%;
            width: 120px;
            height: 120px;
            object-fit: cover;
            margin: 0 auto 15px;
            display: block;
            border: 3px solid var(--border, rgb(238, 238, 238));
        }
        
        [data-theme="dark"] .sidebar-avatar {
            border-color: var(--border, rgb(51, 51, 51));
        }
        
        .sidebar-name {
            margin: 0 0 8px 0;
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary, rgb(30, 30, 30));
        }
        
        [data-theme="dark"] .sidebar-name {
            color: var(--primary, rgb(218, 218, 219));
        }
        
        .sidebar-subtitle {
            margin: 0 0 15px 0;
            font-size: 0.9em;
            color: var(--secondary, rgb(108, 108, 108));
        }
        
        [data-theme="dark"] .sidebar-subtitle {
            color: var(--secondary, rgb(155, 156, 157));
        }
        
        .main-content {
            flex: 1;
            min-width: 0;
        }
        
        .sidebar-profile .social-icons {
            justify-content: center;
            margin-top: 15px;
        }
        
        @media (max-width: 768px) {
            .main-wrapper {
                flex-direction: column;
            }
            
            .sidebar-profile {
                position: relative;
                top: 0;
                flex: 1;
            }
        }
    </style>
    {{- end }}
</head>

{{- if (or (ne .Kind `page` ) (eq .Layout `archives`) (eq .Layout `search`)) }}
<body class="list" id="top">
{{- else }}
<body id="top">
{{- end }}
    {{ partialCached "header.html" . .Page -}}
    {{- if site.Params.sidebarProfile }}
    <div class="main-wrapper">
        {{- partial "sidebar_profile.html" . }}
        <div class="main-content">
            <main class="main">
                {{- block "main" . }}{{ end }}
            </main>
        </div>
    </div>
    {{- else }}
    <main class="main">
        {{- block "main" . }}{{ end }}
    </main>
    {{- end }}
    {{ partialCached "footer.html" . .Layout .Kind (.Param "hideFooter") (.Param "ShowCodeCopyButtons") -}}
    {{- partial "share_icons_script.html" . -}}
</body>

</html>
